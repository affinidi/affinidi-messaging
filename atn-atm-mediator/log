[2m2024-06-06T13:53:37.048438Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m         db          ad88     ad88  88               88           88  88     88b           d88                       88  88
[2m2024-06-06T13:53:37.048558Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m        d88b        d8"      d8"    ""               ""           88  ""     888b         d888                       88  ""                ,d
[2m2024-06-06T13:53:37.048568Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m       d8'`8b       88       88                                   88         88`8b       d8'88                       88                    88
[2m2024-06-06T13:53:37.048575Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m      d8'  `8b    MM88MMM  MM88MMM  88  8b,dPPYba,   88   ,adPPYb,88  88     88 `8b     d8' 88   ,adPPYba,   ,adPPYb,88  88  ,adPPYYba,  MM88MMM  ,adPPYba,   8b,dPPYba,
[2m2024-06-06T13:53:37.048582Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m     d8YaaaaY8b     88       88     88  88P'   `"8a  88  a8"    `Y88  88     88  `8b   d8'  88  a8P_____88  a8"    `Y88  88  ""     `Y8    88    a8"     "8a  88P'   "Y8
[2m2024-06-06T13:53:37.048589Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m    d8""""""""8b    88       88     88  88       88  88  8b       88  88     88   `8b d8'   88  8PP"""""""  8b       88  88  ,adPPPPP88    88    8b       d8  88
[2m2024-06-06T13:53:37.048595Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m   d8'        `8b   88       88     88  88       88  88  "8a,   ,d88  88     88    `888'    88  "8b,   ,aa  "8a,   ,d88  88  88,    ,88    88,   "8a,   ,a8"  88
[2m2024-06-06T13:53:37.048611Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m  d8'          `8b  88       88     88  88       88  88   `"8bbdP"Y8  88     88     `8'     88   `"Ybbd8"'   `"8bbdP"Y8  88  `"8bbdP"Y8    "Y888  `"YbbdP"'   88
[2m2024-06-06T13:53:37.048616Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m 
[2m2024-06-06T13:53:37.048622Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m [Loading Affinidi Secure Messaging Mediator configuration]
[2m2024-06-06T13:53:37.048739Z[0m [32m INFO[0m [2matn_atm_mediator::common::config[0m[2m:[0m Config file(conf/mediator.toml)
[2m2024-06-06T13:53:37.053085Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m Log level set to (debug)
[2m2024-06-06T13:53:37.056293Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m Configuration settings parsed successfully.
Config {
    log_level: LevelFilter::DEBUG,
    listen_address: "0.0.0.0:7037",
    mediator_did: "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19",
    mediator_did_doc: "Hidden",
    mediator_secrets: "(2) secrets loaded",
    mediator_allowed_dids: "(0) allowed_dids loaded",
    mediator_denied_dids: "(0) denied_dids loaded",
    use_ssl: true,
    database_url: "redis://127.0.0.1/",
    database_pool_size: 10,
    database_timeout: 2,
    max_message_size: 1048576,
    max_queued_messages: 100,
    message_expiry_minutes: 10080,
    ssl_certificate_file: "conf/keys/end.cert",
    ssl_key_file: "conf/keys/end.key",
    jwt_encoding_key?: true,
    jwt_decoding_key?: true,
}
[2m2024-06-06T13:53:37.057827Z[0m [32m INFO[0m [2matn_atm_mediator::database::handlers[0m[2m:[0m Database ping ok! Expected (PONG) received (PONG)
[2m2024-06-06T13:53:37.058154Z[0m [34mDEBUG[0m [2matn_atm_mediator::database::handlers[0m[2m:[0m Stats: [string-data('"45080"'), nil, string-data('"14"'), nil, nil]
[2m2024-06-06T13:53:37.058188Z[0m [32m INFO[0m [2matn_atm_mediator::database::handlers[0m[2m:[0m Global Metadata: 
	Message counts: recv(14) sent(0) deleted(0) queued(14)
	Bytes stored: 45080
[2m2024-06-06T13:53:37.058978Z[0m [32m INFO[0m [2matn_atm_mediator[0m[2m:[0m This mediator is using SSL/TLS for secure communication.
[2m2024-06-06T13:53:59.943521Z[0m [34mDEBUG[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x0), max_concurrent_streams: 200, initial_window_size: 1048576, max_frame_size: 16384, max_header_list_size: 16384 }
[2m2024-06-06T13:53:59.944260Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 983041 }
[2m2024-06-06T13:53:59.944468Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
[2m2024-06-06T13:53:59.944550Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) }
[2m2024-06-06T13:53:59.944607Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 5177345 }
[2m2024-06-06T13:53:59.945026Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.945186Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.945244Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) }
[2m2024-06-06T13:53:59.945265Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::proto::settings[0m[2m:[0m received settings ACK; applying Settings { flags: (0x0), max_concurrent_streams: 200, initial_window_size: 1048576, max_frame_size: 16384, max_header_list_size: 16384 }
[2m2024-06-06T13:53:59.945608Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:53:59.946527Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::database::session[0m[2m:[0m Session created: Session { session_id: "Wbpw1s8p", challenge: "AtOMqdPvhWIF4gDABlhvdaQcF0DUVSWE", remote_address: "127.0.0.1:53492", state: ChallengeSent, did: "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" }
[2m2024-06-06T13:53:59.946559Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::authenticate[0m[2m:[0m Wbpw1s8p:127.0.0.1:53492: Challenge sent to DID(did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz)
[2m2024-06-06T13:53:59.946664Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m1 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:53:59.946822Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.946895Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.954255Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.954332Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.954515Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:53:59.955135Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Checking if APU exists in JWE?
[2m2024-06-06T13:53:59.955157Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Found APU in JWE. Algorithm type (ECDH-1PU+A256KW)
[2m2024-06-06T13:53:59.955672Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack[0m[2m:[0m metadata = UnpackMetadata {
    encrypted: true,
    authenticated: true,
    non_repudiation: false,
    anonymous_sender: false,
    re_wrapped_in_forward: false,
    encrypted_from_kid: Some(
        "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-2",
    ),
    encrypted_to_kids: Some(
        [
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19#key-2",
        ],
    ),
    sign_from: None,
    from_prior_issuer_kid: None,
    enc_alg_auth: None,
    enc_alg_anon: None,
    sign_alg: None,
    signed_message: None,
    from_prior: None,
}
[2m2024-06-06T13:53:59.955718Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m expecting (ECDH-1PU+A256KW) jwe.protected.alg(ECDH-1PU+A256KW)
[2m2024-06-06T13:53:59.955736Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m 1 to_kids found
[2m2024-06-06T13:53:59.959012Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = true
[2m2024-06-06T13:53:59.959041Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = {"signatures":[{"header":{"kid":"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-1"},"protected":"eyJ0eXAiOiJhcHBsaWNhdGlvbi9kaWRjb21tLXNpZ25lZCtqc29uIiwiYWxnIjoiRWREU0EifQ","signature":"_jKTlnkGFn3vynVdAxplY-dBG34kTQCPlrhcf2AyLGIqU9Q0dsxhMvvvV17Xo39dx_dHNEaGpYI6uCbU5VFnAA"}],"payload":"eyJpZCI6IjQ2ZTAxZjA2LTRiYjAtNDZlYi1hODg3LTQ2ODAyNzEzZjhjZiIsInR5cCI6ImFwcGxpY2F0aW9uL2RpZGNvbW0tcGxhaW4ranNvbiIsInR5cGUiOiJodHRwczovL2FmZmluaWRpLmNvbS9hdG0vMS4wL2F1dGhlbnRpY2F0ZSIsImJvZHkiOnsiY2hhbGxlbmdlIjoiQXRPTXFkUHZoV0lGNGdEQUJsaHZkYVFjRjBEVVZTV0UiLCJzZXNzaW9uX2lkIjoiV2JwdzFzOHAifSwiZnJvbSI6ImRpZDpwZWVyOjIuVno2TWtnV0pmVm1QRUxvenE2YUN5Y0szQ3B4SE44VXBwaG4zV1N1UWtXWTZpcXNqRi5FelEzc2hmYjd2d1FhVEpxRmt0OG5SZm83TnU5OHRtZVlwZERmV2dycVFpdERhcVhSeiIsInRvIjpbImRpZDpwZWVyOjIuVno2TWtpVG9xb3Z3dzd2WXR4bTF4Tk0xNXU5SnpxelVGWjFrN3M3TWF6WUpVeUF4di5FelEzc2hRTHFSVXphNkFNSkZiUHVNZHZGUkZXbTF3S3ZpUVJuUVNDMWZTY292Sk40cy5TZXlKMElqb2lSRWxFUTI5dGJVMWxjM05oWjJsdVp5SXNJbk1pT25zaWRYSnBJam9pYUhSMGNITTZMeTh4TWpjdU1DNHdMakU2TnpBek55SXNJbUVpT2xzaVpHbGtZMjl0YlM5Mk1pSmRMQ0p5SWpwYlhYMTkiXSwiY3JlYXRlZF90aW1lIjoxNzE3NjgyMDM5LCJleHBpcmVzX3RpbWUiOjE3MTc2ODIwOTl9"}
[2m2024-06-06T13:53:59.959153Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m returning envelope type (JWS)
[2m2024-06-06T13:53:59.959176Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Is this a signed envelope? expect(JWS) actual(JWS)
[2m2024-06-06T13:53:59.959190Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Trying to unpack signed envelope
[2m2024-06-06T13:53:59.962008Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::authenticate[0m[2m:[0m Wbpw1s8p:127.0.0.1:53492: Authentication successful for DID(did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz)
[2m2024-06-06T13:53:59.962164Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m7 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:53:59.962288Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.962342Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.964052Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.964110Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.964269Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:53:59.964823Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m Wbpw1s8p: Protected connection accepted from (127.0.0.1:53492)
[2m2024-06-06T13:53:59.965202Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Checking if APU exists in JWE?
[2m2024-06-06T13:53:59.965229Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Found APU in JWE. Algorithm type (ECDH-1PU+A256KW)
[2m2024-06-06T13:53:59.965504Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m message converted to MetaEnvelope
[2m2024-06-06T13:53:59.965531Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack[0m[2m:[0m metadata = UnpackMetadata {
    encrypted: true,
    authenticated: true,
    non_repudiation: false,
    anonymous_sender: false,
    re_wrapped_in_forward: false,
    encrypted_from_kid: Some(
        "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-2",
    ),
    encrypted_to_kids: Some(
        [
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19#key-2",
        ],
    ),
    sign_from: None,
    from_prior_issuer_kid: None,
    enc_alg_auth: None,
    enc_alg_anon: None,
    sign_alg: None,
    signed_message: None,
    from_prior: None,
}
[2m2024-06-06T13:53:59.965566Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m expecting (ECDH-1PU+A256KW) jwe.protected.alg(ECDH-1PU+A256KW)
[2m2024-06-06T13:53:59.965583Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m 1 to_kids found
[2m2024-06-06T13:53:59.968474Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = true
[2m2024-06-06T13:53:59.968494Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = {"signatures":[{"header":{"kid":"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-1"},"protected":"eyJ0eXAiOiJhcHBsaWNhdGlvbi9kaWRjb21tLXNpZ25lZCtqc29uIiwiYWxnIjoiRWREU0EifQ","signature":"T-vTMu4OZgP72kyITu8jQE9QGjGBfjFTbjI98aC1wHoi2zbSpSD81WiukMGYK4BTDGY6Yi7St2KZM5HWdCrcAg"}],"payload":"eyJpZCI6IjcyYjUxZjRhLTdiMGItNDczYi1iMTU4LTA0NTYxNDRkMmQ0MCIsInR5cCI6ImFwcGxpY2F0aW9uL2RpZGNvbW0tcGxhaW4ranNvbiIsInR5cGUiOiJodHRwczovL2RpZGNvbW0ub3JnL3RydXN0LXBpbmcvMi4wL3BpbmciLCJib2R5Ijp7InJlc3BvbnNlX3JlcXVlc3RlZCI6dHJ1ZX0sImZyb20iOiJkaWQ6cGVlcjoyLlZ6Nk1rZ1dKZlZtUEVMb3pxNmFDeWNLM0NweEhOOFVwcGhuM1dTdVFrV1k2aXFzakYuRXpRM3NoZmI3dndRYVRKcUZrdDhuUmZvN051OTh0bWVZcGREZldncnFRaXREYXFYUnoiLCJ0byI6WyJkaWQ6cGVlcjoyLlZ6Nk1raVRvcW92d3c3dll0eG0xeE5NMTV1OUp6cXpVRloxazdzN01hellKVXlBeHYuRXpRM3NoUUxxUlV6YTZBTUpGYlB1TWR2RlJGV20xd0t2aVFSblFTQzFmU2NvdkpONHMuU2V5SjBJam9pUkVsRVEyOXRiVTFsYzNOaFoybHVaeUlzSW5NaU9uc2lkWEpwSWpvaWFIUjBjSE02THk4eE1qY3VNQzR3TGpFNk56QXpOeUlzSW1FaU9sc2laR2xrWTI5dGJTOTJNaUpkTENKeUlqcGJYWDE5Il0sImNyZWF0ZWRfdGltZSI6MTcxNzY4MjAzOSwiZXhwaXJlc190aW1lIjoxNzE3NjgyMzM5fQ"}
[2m2024-06-06T13:53:59.968558Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m returning envelope type (JWS)
[2m2024-06-06T13:53:59.968580Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Is this a signed envelope? expect(JWS) actual(JWS)
[2m2024-06-06T13:53:59.968595Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Trying to unpack signed envelope
[2m2024-06-06T13:53:59.969077Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m message unpacked:
Message {
    id: "72b51f4a-7b0b-473b-b158-0456144d2d40",
    typ: "application/didcomm-plain+json",
    type_: "https://didcomm.org/trust-ping/2.0/ping",
    body: Object {
        "response_requested": Bool(true),
    },
    from: Some(
        "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz",
    ),
    to: Some(
        [
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19",
        ],
    ),
    thid: None,
    pthid: None,
    extra_headers: {},
    created_time: Some(
        1717682039,
    ),
    expires_time: Some(
        1717682339,
    ),
    from_prior: None,
    attachments: None,
}
[2m2024-06-06T13:53:59.969124Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m To: did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19
[2m2024-06-06T13:53:59.969154Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m Response requested: true
[2m2024-06-06T13:53:59.969173Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m ping received from: (did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz) Respond?(true)
[2m2024-06-06T13:53:59.969202Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m response_msg: Message { id: "c74aebfb-7765-4069-ac4a-7e22672c74f8", typ: "application/didcomm-plain+json", type_: "https://didcomm.org/trust-ping/2.0/ping", body: Object {}, from: Some("did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19"), to: Some(["did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"]), thid: Some("72b51f4a-7b0b-473b-b158-0456144d2d40"), pthid: None, extra_headers: {}, created_time: Some(1717682039), expires_time: Some(1717682339), from_prior: None, attachments: None }
[2m2024-06-06T13:53:59.969238Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m message processed:
Some(
    Message {
        id: "c74aebfb-7765-4069-ac4a-7e22672c74f8",
        typ: "application/didcomm-plain+json",
        type_: "https://didcomm.org/trust-ping/2.0/ping",
        body: Object {},
        from: Some(
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19",
        ),
        to: Some(
            [
                "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz",
            ],
        ),
        thid: Some(
            "72b51f4a-7b0b-473b-b158-0456144d2d40",
        ),
        pthid: None,
        extra_headers: {},
        created_time: Some(
            1717682039,
        ),
        expires_time: Some(
            1717682339,
        ),
        from_prior: None,
        attachments: None,
    },
)
[2m2024-06-06T13:53:59.969267Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m response to_dids: count(1) vec(["did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"])
[2m2024-06-06T13:53:59.974649Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m[1mstore_message[0m[1m{[0m[3msession_id[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m trying to store msg_id(db580d4175338c16f1689f14b9dbfc3f3c45ce79b8575344dbaf1bc7da9af4f0), from(Some("did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19")) from_hash(Some("a7cbb7b6150409b1414ed2686137d31882ec42183323770b651fcf1c0864cdfb")) to(did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz) to_hash(47e1ddb470760b72d44090a50004d11d74e399ab07905b076d38ef0b51e77542), bytes(3220)
[2m2024-06-06T13:53:59.974897Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m[1mstore_message[0m[1m{[0m[3msession_id[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m result = "OK"
[2m2024-06-06T13:53:59.974918Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m[1mstore_message[0m[1m{[0m[3msession_id[0m[2m=[0m"Wbpw1s8p"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m Message hash(db580d4175338c16f1689f14b9dbfc3f3c45ce79b8575344dbaf1bc7da9af4f0) stored in database
[2m2024-06-06T13:53:59.975029Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m10 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:53:59.975120Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.975161Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.976606Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(7), flags: (0x5: END_HEADERS | END_STREAM) }
[2m2024-06-06T13:53:59.976760Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:53:59.977166Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m Wbpw1s8p: Protected connection accepted from (127.0.0.1:53492)
[2m2024-06-06T13:53:59.977485Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"inbox"[1m}[0m[2m:[0m [2matn_atm_mediator::database::handlers[0m[2m:[0m DID_HASH: 47e1ddb470760b72d44090a50004d11d74e399ab07905b076d38ef0b51e77542
[2m2024-06-06T13:53:59.978071Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"inbox"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_list[0m[2m:[0m List contains (15) messages
[2m2024-06-06T13:53:59.978275Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m1 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:53:59.978335Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.978368Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.979606Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
[2m2024-06-06T13:53:59.979716Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:53:59.980087Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m Wbpw1s8p: Protected connection accepted from (127.0.0.1:53492)
[2m2024-06-06T13:53:59.980333Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"outbox"[1m}[0m[2m:[0m [2matn_atm_mediator::database::handlers[0m[2m:[0m DID_HASH: 47e1ddb470760b72d44090a50004d11d74e399ab07905b076d38ef0b51e77542
[2m2024-06-06T13:53:59.980511Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"outbox"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_list[0m[2m:[0m List contains (0) messages
[2m2024-06-06T13:53:59.980575Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m0 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:53:59.980629Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.980660Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(9), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.981809Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.981844Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.981951Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:53:59.982327Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m Wbpw1s8p: Protected connection accepted from (127.0.0.1:53492)
[2m2024-06-06T13:53:59.982403Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_delete_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_delete[0m[2m:[0m Deleting (15) messages
[2m2024-06-06T13:53:59.982419Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_delete_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_delete[0m[2m:[0m Deleting message: message_id(96ec8dd24185eb7f363b1ff8d3b3a7460a568e823c0a2851e1b3d2231ccf7e83)
[2m2024-06-06T13:53:59.982818Z[0m [31mERROR[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_delete_handler[0m[1m{[0m[3msession[0m[2m=[0m"Wbpw1s8p" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"[1m}[0m[2m:[0m[1mdelete_messages[0m[1m{[0m[3mmessage_hash[0m[2m=[0m"96ec8dd24185eb7f363b1ff8d3b3a7460a568e823c0a2851e1b3d2231ccf7e83"[1m}[0m[2m:[0m[1mget_message_metadata[0m[1m{[0m[3msession_id[0m[2m=[0m"Wbpw1s8p" [3mmessage_hash[0m[2m=[0m"96ec8dd24185eb7f363b1ff8d3b3a7460a568e823c0a2851e1b3d2231ccf7e83"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m Couldn't get message metadata from database: Response was of incompatible type - TypeError: "Response type not string compatible." (response was nil)
[2m2024-06-06T13:53:59.982891Z[0m [33m WARN[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::errors[0m[2m:[0m Wbpw1s8p: httpcode(503) errorCode(10), errorCodeStr(DatabaseError) message(Couldn't get message metadata from database: Response was of incompatible type - TypeError: "Response type not string compatible." (response was nil))
[2m2024-06-06T13:53:59.982939Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m0 ms [3mstatus[0m[2m=[0m503
[2m2024-06-06T13:53:59.982969Z[0m [31mERROR[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_failure[0m[2m:[0m response failed [3mclassification[0m[2m=[0mStatus code: 503 Service Unavailable [3mlatency[0m[2m=[0m0 ms
[2m2024-06-06T13:53:59.983023Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:53:59.983057Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:53:59.983506Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::proto::connection[0m[2m:[0m Connection::poll; IO error [3merror[0m[2m=[0mUnexpectedEof
[2m2024-06-06T13:54:30.482654Z[0m [34mDEBUG[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x0), max_concurrent_streams: 200, initial_window_size: 1048576, max_frame_size: 16384, max_header_list_size: 16384 }
[2m2024-06-06T13:54:30.482850Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 983041 }
[2m2024-06-06T13:54:30.483348Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
[2m2024-06-06T13:54:30.483382Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) }
[2m2024-06-06T13:54:30.483410Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) }
[2m2024-06-06T13:54:30.483431Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::proto::settings[0m[2m:[0m received settings ACK; applying Settings { flags: (0x0), max_concurrent_streams: 200, initial_window_size: 1048576, max_frame_size: 16384, max_header_list_size: 16384 }
[2m2024-06-06T13:54:30.483455Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 5177345 }
[2m2024-06-06T13:54:30.483680Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.483746Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.483972Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:54:30.484678Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::database::session[0m[2m:[0m Session created: Session { session_id: "RChTvPXC", challenge: "zQvZPGGHpekPPNIG231vpUtzcVpsykas", remote_address: "127.0.0.1:53497", state: ChallengeSent, did: "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" }
[2m2024-06-06T13:54:30.484712Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::authenticate[0m[2m:[0m RChTvPXC:127.0.0.1:53497: Challenge sent to DID(did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz)
[2m2024-06-06T13:54:30.484795Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m0 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:54:30.484901Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.484968Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.492102Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.492195Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.492392Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:54:30.492799Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Checking if APU exists in JWE?
[2m2024-06-06T13:54:30.492821Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Found APU in JWE. Algorithm type (ECDH-1PU+A256KW)
[2m2024-06-06T13:54:30.493102Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack[0m[2m:[0m metadata = UnpackMetadata {
    encrypted: true,
    authenticated: true,
    non_repudiation: false,
    anonymous_sender: false,
    re_wrapped_in_forward: false,
    encrypted_from_kid: Some(
        "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-2",
    ),
    encrypted_to_kids: Some(
        [
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19#key-2",
        ],
    ),
    sign_from: None,
    from_prior_issuer_kid: None,
    enc_alg_auth: None,
    enc_alg_anon: None,
    sign_alg: None,
    signed_message: None,
    from_prior: None,
}
[2m2024-06-06T13:54:30.493151Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m expecting (ECDH-1PU+A256KW) jwe.protected.alg(ECDH-1PU+A256KW)
[2m2024-06-06T13:54:30.493165Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m 1 to_kids found
[2m2024-06-06T13:54:30.496444Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = true
[2m2024-06-06T13:54:30.496499Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = {"signatures":[{"header":{"kid":"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-1"},"protected":"eyJ0eXAiOiJhcHBsaWNhdGlvbi9kaWRjb21tLXNpZ25lZCtqc29uIiwiYWxnIjoiRWREU0EifQ","signature":"lH_iEjCxkdINBDPho9TaDoF3bejEZ3Nlk6BuWeXxL2S1OwohKEAuE_VnD1-MifPt7EVQ7F1DIyxH0rPw-x6CCw"}],"payload":"eyJpZCI6ImYwNjJmZmM4LTU2NTItNGZiMC1hZDI4LTRiZjYyOGNjYzU4ZSIsInR5cCI6ImFwcGxpY2F0aW9uL2RpZGNvbW0tcGxhaW4ranNvbiIsInR5cGUiOiJodHRwczovL2FmZmluaWRpLmNvbS9hdG0vMS4wL2F1dGhlbnRpY2F0ZSIsImJvZHkiOnsiY2hhbGxlbmdlIjoielF2WlBHR0hwZWtQUE5JRzIzMXZwVXR6Y1Zwc3lrYXMiLCJzZXNzaW9uX2lkIjoiUkNoVHZQWEMifSwiZnJvbSI6ImRpZDpwZWVyOjIuVno2TWtnV0pmVm1QRUxvenE2YUN5Y0szQ3B4SE44VXBwaG4zV1N1UWtXWTZpcXNqRi5FelEzc2hmYjd2d1FhVEpxRmt0OG5SZm83TnU5OHRtZVlwZERmV2dycVFpdERhcVhSeiIsInRvIjpbImRpZDpwZWVyOjIuVno2TWtpVG9xb3Z3dzd2WXR4bTF4Tk0xNXU5SnpxelVGWjFrN3M3TWF6WUpVeUF4di5FelEzc2hRTHFSVXphNkFNSkZiUHVNZHZGUkZXbTF3S3ZpUVJuUVNDMWZTY292Sk40cy5TZXlKMElqb2lSRWxFUTI5dGJVMWxjM05oWjJsdVp5SXNJbk1pT25zaWRYSnBJam9pYUhSMGNITTZMeTh4TWpjdU1DNHdMakU2TnpBek55SXNJbUVpT2xzaVpHbGtZMjl0YlM5Mk1pSmRMQ0p5SWpwYlhYMTkiXSwiY3JlYXRlZF90aW1lIjoxNzE3NjgyMDcwLCJleHBpcmVzX3RpbWUiOjE3MTc2ODIxMzB9"}
[2m2024-06-06T13:54:30.496584Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m returning envelope type (JWS)
[2m2024-06-06T13:54:30.496609Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Is this a signed envelope? expect(JWS) actual(JWS)
[2m2024-06-06T13:54:30.496625Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Trying to unpack signed envelope
[2m2024-06-06T13:54:30.499346Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::authenticate[0m[2m:[0m RChTvPXC:127.0.0.1:53497: Authentication successful for DID(did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz)
[2m2024-06-06T13:54:30.499502Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m7 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:54:30.499623Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.499682Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.501459Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.501529Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.501701Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:54:30.502249Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m RChTvPXC: Protected connection accepted from (127.0.0.1:53497)
[2m2024-06-06T13:54:30.502579Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Checking if APU exists in JWE?
[2m2024-06-06T13:54:30.502602Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Found APU in JWE. Algorithm type (ECDH-1PU+A256KW)
[2m2024-06-06T13:54:30.502904Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m message converted to MetaEnvelope
[2m2024-06-06T13:54:30.502932Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack[0m[2m:[0m metadata = UnpackMetadata {
    encrypted: true,
    authenticated: true,
    non_repudiation: false,
    anonymous_sender: false,
    re_wrapped_in_forward: false,
    encrypted_from_kid: Some(
        "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-2",
    ),
    encrypted_to_kids: Some(
        [
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19#key-2",
        ],
    ),
    sign_from: None,
    from_prior_issuer_kid: None,
    enc_alg_auth: None,
    enc_alg_anon: None,
    sign_alg: None,
    signed_message: None,
    from_prior: None,
}
[2m2024-06-06T13:54:30.502981Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m expecting (ECDH-1PU+A256KW) jwe.protected.alg(ECDH-1PU+A256KW)
[2m2024-06-06T13:54:30.502999Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m 1 to_kids found
[2m2024-06-06T13:54:30.506114Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = true
[2m2024-06-06T13:54:30.506134Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = {"signatures":[{"header":{"kid":"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-1"},"protected":"eyJ0eXAiOiJhcHBsaWNhdGlvbi9kaWRjb21tLXNpZ25lZCtqc29uIiwiYWxnIjoiRWREU0EifQ","signature":"cJHQNlTsW3XfPlm_MghO8Bi-0kxCFF8P_5_pgBaTN__qJotY0E2dm2zFzWKivWF0MKYTfOMgD5WxW3RZLYl_Cw"}],"payload":"eyJpZCI6IjMzYmM3NDFlLWY3ODAtNGE4OC04ODc3LTA3OGE2ODU0OTdiYSIsInR5cCI6ImFwcGxpY2F0aW9uL2RpZGNvbW0tcGxhaW4ranNvbiIsInR5cGUiOiJodHRwczovL2RpZGNvbW0ub3JnL3RydXN0LXBpbmcvMi4wL3BpbmciLCJib2R5Ijp7InJlc3BvbnNlX3JlcXVlc3RlZCI6dHJ1ZX0sImZyb20iOiJkaWQ6cGVlcjoyLlZ6Nk1rZ1dKZlZtUEVMb3pxNmFDeWNLM0NweEhOOFVwcGhuM1dTdVFrV1k2aXFzakYuRXpRM3NoZmI3dndRYVRKcUZrdDhuUmZvN051OTh0bWVZcGREZldncnFRaXREYXFYUnoiLCJ0byI6WyJkaWQ6cGVlcjoyLlZ6Nk1raVRvcW92d3c3dll0eG0xeE5NMTV1OUp6cXpVRloxazdzN01hellKVXlBeHYuRXpRM3NoUUxxUlV6YTZBTUpGYlB1TWR2RlJGV20xd0t2aVFSblFTQzFmU2NvdkpONHMuU2V5SjBJam9pUkVsRVEyOXRiVTFsYzNOaFoybHVaeUlzSW5NaU9uc2lkWEpwSWpvaWFIUjBjSE02THk4eE1qY3VNQzR3TGpFNk56QXpOeUlzSW1FaU9sc2laR2xrWTI5dGJTOTJNaUpkTENKeUlqcGJYWDE5Il0sImNyZWF0ZWRfdGltZSI6MTcxNzY4MjA3MCwiZXhwaXJlc190aW1lIjoxNzE3NjgyMzcwfQ"}
[2m2024-06-06T13:54:30.506206Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m returning envelope type (JWS)
[2m2024-06-06T13:54:30.506228Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Is this a signed envelope? expect(JWS) actual(JWS)
[2m2024-06-06T13:54:30.506253Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Trying to unpack signed envelope
[2m2024-06-06T13:54:30.506777Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m message unpacked:
Message {
    id: "33bc741e-f780-4a88-8877-078a685497ba",
    typ: "application/didcomm-plain+json",
    type_: "https://didcomm.org/trust-ping/2.0/ping",
    body: Object {
        "response_requested": Bool(true),
    },
    from: Some(
        "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz",
    ),
    to: Some(
        [
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19",
        ],
    ),
    thid: None,
    pthid: None,
    extra_headers: {},
    created_time: Some(
        1717682070,
    ),
    expires_time: Some(
        1717682370,
    ),
    from_prior: None,
    attachments: None,
}
[2m2024-06-06T13:54:30.506824Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m To: did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19
[2m2024-06-06T13:54:30.506848Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m Response requested: true
[2m2024-06-06T13:54:30.506865Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m ping received from: (did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz) Respond?(true)
[2m2024-06-06T13:54:30.506890Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m response_msg: Message { id: "48d9d743-d5ef-42e5-8048-1184b9e277e3", typ: "application/didcomm-plain+json", type_: "https://didcomm.org/trust-ping/2.0/ping", body: Object {}, from: Some("did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19"), to: Some(["did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"]), thid: Some("33bc741e-f780-4a88-8877-078a685497ba"), pthid: None, extra_headers: {}, created_time: Some(1717682070), expires_time: Some(1717682370), from_prior: None, attachments: None }
[2m2024-06-06T13:54:30.506933Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m message processed:
Some(
    Message {
        id: "48d9d743-d5ef-42e5-8048-1184b9e277e3",
        typ: "application/didcomm-plain+json",
        type_: "https://didcomm.org/trust-ping/2.0/ping",
        body: Object {},
        from: Some(
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19",
        ),
        to: Some(
            [
                "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz",
            ],
        ),
        thid: Some(
            "33bc741e-f780-4a88-8877-078a685497ba",
        ),
        pthid: None,
        extra_headers: {},
        created_time: Some(
            1717682070,
        ),
        expires_time: Some(
            1717682370,
        ),
        from_prior: None,
        attachments: None,
    },
)
[2m2024-06-06T13:54:30.506960Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m response to_dids: count(1) vec(["did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"])
[2m2024-06-06T13:54:30.512265Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m[1mstore_message[0m[1m{[0m[3msession_id[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m trying to store msg_id(cf4968a0e2de53e80daf83d984eb883cf2db6fc65f0cb40c51619bdd3a0e4576), from(Some("did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19")) from_hash(Some("a7cbb7b6150409b1414ed2686137d31882ec42183323770b651fcf1c0864cdfb")) to(did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz) to_hash(47e1ddb470760b72d44090a50004d11d74e399ab07905b076d38ef0b51e77542), bytes(3220)
[2m2024-06-06T13:54:30.512547Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m[1mstore_message[0m[1m{[0m[3msession_id[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m result = "OK"
[2m2024-06-06T13:54:30.512572Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m[1mstore_message[0m[1m{[0m[3msession_id[0m[2m=[0m"RChTvPXC"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m Message hash(cf4968a0e2de53e80daf83d984eb883cf2db6fc65f0cb40c51619bdd3a0e4576) stored in database
[2m2024-06-06T13:54:30.512689Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m11 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:54:30.512786Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.512832Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.514382Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(7), flags: (0x5: END_HEADERS | END_STREAM) }
[2m2024-06-06T13:54:30.514539Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:54:30.514966Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m RChTvPXC: Protected connection accepted from (127.0.0.1:53497)
[2m2024-06-06T13:54:30.515236Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"inbox"[1m}[0m[2m:[0m [2matn_atm_mediator::database::handlers[0m[2m:[0m DID_HASH: 47e1ddb470760b72d44090a50004d11d74e399ab07905b076d38ef0b51e77542
[2m2024-06-06T13:54:30.515863Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"inbox"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_list[0m[2m:[0m List contains (16) messages
[2m2024-06-06T13:54:30.516079Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m1 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:54:30.516138Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.516171Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.517435Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
[2m2024-06-06T13:54:30.517540Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:54:30.517911Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m RChTvPXC: Protected connection accepted from (127.0.0.1:53497)
[2m2024-06-06T13:54:30.518169Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"outbox"[1m}[0m[2m:[0m [2matn_atm_mediator::database::handlers[0m[2m:[0m DID_HASH: 47e1ddb470760b72d44090a50004d11d74e399ab07905b076d38ef0b51e77542
[2m2024-06-06T13:54:30.518353Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"outbox"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_list[0m[2m:[0m List contains (0) messages
[2m2024-06-06T13:54:30.518413Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m0 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:54:30.518467Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.518498Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(9), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.519656Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.519696Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.519796Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:54:30.520165Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m RChTvPXC: Protected connection accepted from (127.0.0.1:53497)
[2m2024-06-06T13:54:30.520239Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_delete_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_delete[0m[2m:[0m Deleting (16) messages
[2m2024-06-06T13:54:30.520255Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_delete_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_delete[0m[2m:[0m Deleting message: message_id(96ec8dd24185eb7f363b1ff8d3b3a7460a568e823c0a2851e1b3d2231ccf7e83)
[2m2024-06-06T13:54:30.520556Z[0m [31mERROR[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_delete_handler[0m[1m{[0m[3msession[0m[2m=[0m"RChTvPXC" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"[1m}[0m[2m:[0m[1mdelete_messages[0m[1m{[0m[3mmessage_hash[0m[2m=[0m"96ec8dd24185eb7f363b1ff8d3b3a7460a568e823c0a2851e1b3d2231ccf7e83"[1m}[0m[2m:[0m[1mget_message_metadata[0m[1m{[0m[3msession_id[0m[2m=[0m"RChTvPXC" [3mmessage_hash[0m[2m=[0m"96ec8dd24185eb7f363b1ff8d3b3a7460a568e823c0a2851e1b3d2231ccf7e83"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m Couldn't get message metadata from database: Response was of incompatible type - TypeError: "Response type not string compatible." (response was nil)
[2m2024-06-06T13:54:30.520608Z[0m [33m WARN[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::errors[0m[2m:[0m RChTvPXC: httpcode(503) errorCode(10), errorCodeStr(DatabaseError) message(Couldn't get message metadata from database: Response was of incompatible type - TypeError: "Response type not string compatible." (response was nil))
[2m2024-06-06T13:54:30.520654Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m0 ms [3mstatus[0m[2m=[0m503
[2m2024-06-06T13:54:30.520671Z[0m [31mERROR[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_failure[0m[2m:[0m response failed [3mclassification[0m[2m=[0mStatus code: 503 Service Unavailable [3mlatency[0m[2m=[0m0 ms
[2m2024-06-06T13:54:30.520733Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:54:30.520766Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:54:30.521196Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mGoAway { error_code: NO_ERROR, last_stream_id: StreamId(0) }
[2m2024-06-06T13:56:50.265063Z[0m [34mDEBUG[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x0), max_concurrent_streams: 200, initial_window_size: 1048576, max_frame_size: 16384, max_header_list_size: 16384 }
[2m2024-06-06T13:56:50.265234Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 983041 }
[2m2024-06-06T13:56:50.265722Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
[2m2024-06-06T13:56:50.265758Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) }
[2m2024-06-06T13:56:50.265788Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) }
[2m2024-06-06T13:56:50.265811Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::proto::settings[0m[2m:[0m received settings ACK; applying Settings { flags: (0x0), max_concurrent_streams: 200, initial_window_size: 1048576, max_frame_size: 16384, max_header_list_size: 16384 }
[2m2024-06-06T13:56:50.265836Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 5177345 }
[2m2024-06-06T13:56:50.266097Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.266162Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.266390Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:56:50.267114Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::database::session[0m[2m:[0m Session created: Session { session_id: "S4cyS5gT", challenge: "w1roZXufOmarj8HPylqAp6b51I4nwlLr", remote_address: "127.0.0.1:53514", state: ChallengeSent, did: "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" }
[2m2024-06-06T13:56:50.267144Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::authenticate[0m[2m:[0m S4cyS5gT:127.0.0.1:53514: Challenge sent to DID(did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz)
[2m2024-06-06T13:56:50.267239Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate/challenge [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m0 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:56:50.267347Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.267422Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.274713Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.274763Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.274898Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:56:50.275304Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Checking if APU exists in JWE?
[2m2024-06-06T13:56:50.275325Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Found APU in JWE. Algorithm type (ECDH-1PU+A256KW)
[2m2024-06-06T13:56:50.275615Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack[0m[2m:[0m metadata = UnpackMetadata {
    encrypted: true,
    authenticated: true,
    non_repudiation: false,
    anonymous_sender: false,
    re_wrapped_in_forward: false,
    encrypted_from_kid: Some(
        "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-2",
    ),
    encrypted_to_kids: Some(
        [
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19#key-2",
        ],
    ),
    sign_from: None,
    from_prior_issuer_kid: None,
    enc_alg_auth: None,
    enc_alg_anon: None,
    sign_alg: None,
    signed_message: None,
    from_prior: None,
}
[2m2024-06-06T13:56:50.275649Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m expecting (ECDH-1PU+A256KW) jwe.protected.alg(ECDH-1PU+A256KW)
[2m2024-06-06T13:56:50.275665Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m 1 to_kids found
[2m2024-06-06T13:56:50.279128Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = true
[2m2024-06-06T13:56:50.279148Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = {"signatures":[{"header":{"kid":"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-1"},"protected":"eyJ0eXAiOiJhcHBsaWNhdGlvbi9kaWRjb21tLXNpZ25lZCtqc29uIiwiYWxnIjoiRWREU0EifQ","signature":"WLnLRM0pW6niYjqL_AD4gnl8He1MfaIofYARD7eK6qPCwyheQ2xSbHd6PVT2lGBd99z_P5GbeEoaWFqBR9XyAA"}],"payload":"eyJpZCI6IjQ4MTMzMWUxLWRiZDktNDY0Ni1iOTVhLTIwOGUzYzM3ZWQzYyIsInR5cCI6ImFwcGxpY2F0aW9uL2RpZGNvbW0tcGxhaW4ranNvbiIsInR5cGUiOiJodHRwczovL2FmZmluaWRpLmNvbS9hdG0vMS4wL2F1dGhlbnRpY2F0ZSIsImJvZHkiOnsiY2hhbGxlbmdlIjoidzFyb1pYdWZPbWFyajhIUHlscUFwNmI1MUk0bndsTHIiLCJzZXNzaW9uX2lkIjoiUzRjeVM1Z1QifSwiZnJvbSI6ImRpZDpwZWVyOjIuVno2TWtnV0pmVm1QRUxvenE2YUN5Y0szQ3B4SE44VXBwaG4zV1N1UWtXWTZpcXNqRi5FelEzc2hmYjd2d1FhVEpxRmt0OG5SZm83TnU5OHRtZVlwZERmV2dycVFpdERhcVhSeiIsInRvIjpbImRpZDpwZWVyOjIuVno2TWtpVG9xb3Z3dzd2WXR4bTF4Tk0xNXU5SnpxelVGWjFrN3M3TWF6WUpVeUF4di5FelEzc2hRTHFSVXphNkFNSkZiUHVNZHZGUkZXbTF3S3ZpUVJuUVNDMWZTY292Sk40cy5TZXlKMElqb2lSRWxFUTI5dGJVMWxjM05oWjJsdVp5SXNJbk1pT25zaWRYSnBJam9pYUhSMGNITTZMeTh4TWpjdU1DNHdMakU2TnpBek55SXNJbUVpT2xzaVpHbGtZMjl0YlM5Mk1pSmRMQ0p5SWpwYlhYMTkiXSwiY3JlYXRlZF90aW1lIjoxNzE3NjgyMjEwLCJleHBpcmVzX3RpbWUiOjE3MTc2ODIyNzB9"}
[2m2024-06-06T13:56:50.279209Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m returning envelope type (JWS)
[2m2024-06-06T13:56:50.279236Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Is this a signed envelope? expect(JWS) actual(JWS)
[2m2024-06-06T13:56:50.279254Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Trying to unpack signed envelope
[2m2024-06-06T13:56:50.281818Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::authenticate[0m[2m:[0m S4cyS5gT:127.0.0.1:53514: Authentication successful for DID(did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz)
[2m2024-06-06T13:56:50.281920Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/authenticate [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m7 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:56:50.282008Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.282051Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.283630Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.283680Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.283812Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:56:50.284296Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m S4cyS5gT: Protected connection accepted from (127.0.0.1:53514)
[2m2024-06-06T13:56:50.284557Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Checking if APU exists in JWE?
[2m2024-06-06T13:56:50.284578Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::jwe::parse[0m[2m:[0m Found APU in JWE. Algorithm type (ECDH-1PU+A256KW)
[2m2024-06-06T13:56:50.284805Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m message converted to MetaEnvelope
[2m2024-06-06T13:56:50.284834Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack[0m[2m:[0m metadata = UnpackMetadata {
    encrypted: true,
    authenticated: true,
    non_repudiation: false,
    anonymous_sender: false,
    re_wrapped_in_forward: false,
    encrypted_from_kid: Some(
        "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-2",
    ),
    encrypted_to_kids: Some(
        [
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19#key-2",
        ],
    ),
    sign_from: None,
    from_prior_issuer_kid: None,
    enc_alg_auth: None,
    enc_alg_anon: None,
    sign_alg: None,
    signed_message: None,
    from_prior: None,
}
[2m2024-06-06T13:56:50.284863Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m expecting (ECDH-1PU+A256KW) jwe.protected.alg(ECDH-1PU+A256KW)
[2m2024-06-06T13:56:50.284881Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m 1 to_kids found
[2m2024-06-06T13:56:50.287999Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = true
[2m2024-06-06T13:56:50.288042Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m payload = {"signatures":[{"header":{"kid":"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz#key-1"},"protected":"eyJ0eXAiOiJhcHBsaWNhdGlvbi9kaWRjb21tLXNpZ25lZCtqc29uIiwiYWxnIjoiRWREU0EifQ","signature":"RunA5xTLKO5tN4IQ638kpybFWCBLX0zYBSjBtJBQ7gaOfGFM_fuDZ6HhDG3nsC8i__Pgq3iVeKO3eu9H0fuFCQ"}],"payload":"eyJpZCI6ImM0MjFkMDY5LTA5OWQtNGVhMS1hY2JjLTRkNzEzYTA0ZWY1MyIsInR5cCI6ImFwcGxpY2F0aW9uL2RpZGNvbW0tcGxhaW4ranNvbiIsInR5cGUiOiJodHRwczovL2RpZGNvbW0ub3JnL3RydXN0LXBpbmcvMi4wL3BpbmciLCJib2R5Ijp7InJlc3BvbnNlX3JlcXVlc3RlZCI6dHJ1ZX0sImZyb20iOiJkaWQ6cGVlcjoyLlZ6Nk1rZ1dKZlZtUEVMb3pxNmFDeWNLM0NweEhOOFVwcGhuM1dTdVFrV1k2aXFzakYuRXpRM3NoZmI3dndRYVRKcUZrdDhuUmZvN051OTh0bWVZcGREZldncnFRaXREYXFYUnoiLCJ0byI6WyJkaWQ6cGVlcjoyLlZ6Nk1raVRvcW92d3c3dll0eG0xeE5NMTV1OUp6cXpVRloxazdzN01hellKVXlBeHYuRXpRM3NoUUxxUlV6YTZBTUpGYlB1TWR2RlJGV20xd0t2aVFSblFTQzFmU2NvdkpONHMuU2V5SjBJam9pUkVsRVEyOXRiVTFsYzNOaFoybHVaeUlzSW5NaU9uc2lkWEpwSWpvaWFIUjBjSE02THk4eE1qY3VNQzR3TGpFNk56QXpOeUlzSW1FaU9sc2laR2xrWTI5dGJTOTJNaUpkTENKeUlqcGJYWDE5Il0sImNyZWF0ZWRfdGltZSI6MTcxNzY4MjIxMCwiZXhwaXJlc190aW1lIjoxNzE3NjgyNTEwfQ"}
[2m2024-06-06T13:56:50.288117Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::authcrypt[0m[2m:[0m returning envelope type (JWS)
[2m2024-06-06T13:56:50.288144Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Is this a signed envelope? expect(JWS) actual(JWS)
[2m2024-06-06T13:56:50.288163Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_didcomm::message::unpack::sign[0m[2m:[0m Trying to unpack signed envelope
[2m2024-06-06T13:56:50.288699Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m message unpacked:
Message {
    id: "c421d069-099d-4ea1-acbc-4d713a04ef53",
    typ: "application/didcomm-plain+json",
    type_: "https://didcomm.org/trust-ping/2.0/ping",
    body: Object {
        "response_requested": Bool(true),
    },
    from: Some(
        "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz",
    ),
    to: Some(
        [
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19",
        ],
    ),
    thid: None,
    pthid: None,
    extra_headers: {},
    created_time: Some(
        1717682210,
    ),
    expires_time: Some(
        1717682510,
    ),
    from_prior: None,
    attachments: None,
}
[2m2024-06-06T13:56:50.288750Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m To: did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19
[2m2024-06-06T13:56:50.288776Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m Response requested: true
[2m2024-06-06T13:56:50.288798Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m ping received from: (did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz) Respond?(true)
[2m2024-06-06T13:56:50.288827Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m[1mtrust_ping[0m[1m{[0m[3msession_id[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::messages::protocols::ping[0m[2m:[0m response_msg: Message { id: "4ce7dc48-967f-461f-bc99-8cbf565e2041", typ: "application/didcomm-plain+json", type_: "https://didcomm.org/trust-ping/2.0/ping", body: Object {}, from: Some("did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19"), to: Some(["did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"]), thid: Some("c421d069-099d-4ea1-acbc-4d713a04ef53"), pthid: None, extra_headers: {}, created_time: Some(1717682210), expires_time: Some(1717682510), from_prior: None, attachments: None }
[2m2024-06-06T13:56:50.288865Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m message processed:
Some(
    Message {
        id: "4ce7dc48-967f-461f-bc99-8cbf565e2041",
        typ: "application/didcomm-plain+json",
        type_: "https://didcomm.org/trust-ping/2.0/ping",
        body: Object {},
        from: Some(
            "did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19",
        ),
        to: Some(
            [
                "did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz",
            ],
        ),
        thid: Some(
            "c421d069-099d-4ea1-acbc-4d713a04ef53",
        ),
        pthid: None,
        extra_headers: {},
        created_time: Some(
            1717682210,
        ),
        expires_time: Some(
            1717682510,
        ),
        from_prior: None,
        attachments: None,
    },
)
[2m2024-06-06T13:56:50.288897Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_inbound[0m[2m:[0m response to_dids: count(1) vec(["did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"])
[2m2024-06-06T13:56:50.294317Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m[1mstore_message[0m[1m{[0m[3msession_id[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m trying to store msg_id(a997471a9147edf94abc944ae77657697d0f388f908a8ebbf8b6a69e63fc118f), from(Some("did:peer:2.Vz6MkiToqovww7vYtxm1xNM15u9JzqzUFZ1k7s7MazYJUyAxv.EzQ3shQLqRUza6AMJFbPuMdvFRFWm1wKviQRnQSC1fScovJN4s.SeyJ0IjoiRElEQ29tbU1lc3NhZ2luZyIsInMiOnsidXJpIjoiaHR0cHM6Ly8xMjcuMC4wLjE6NzAzNyIsImEiOlsiZGlkY29tbS92MiJdLCJyIjpbXX19")) from_hash(Some("a7cbb7b6150409b1414ed2686137d31882ec42183323770b651fcf1c0864cdfb")) to(did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz) to_hash(47e1ddb470760b72d44090a50004d11d74e399ab07905b076d38ef0b51e77542), bytes(3220)
[2m2024-06-06T13:56:50.294544Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m[1mstore_message[0m[1m{[0m[3msession_id[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m result = "OK"
[2m2024-06-06T13:56:50.294567Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_inbound_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m[1mstore_message[0m[1m{[0m[3msession_id[0m[2m=[0m"S4cyS5gT"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m Message hash(a997471a9147edf94abc944ae77657697d0f388f908a8ebbf8b6a69e63fc118f) stored in database
[2m2024-06-06T13:56:50.294683Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mPOST [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/inbound [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m10 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:56:50.294781Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.294827Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.296327Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(7), flags: (0x5: END_HEADERS | END_STREAM) }
[2m2024-06-06T13:56:50.296473Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:56:50.296914Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m S4cyS5gT: Protected connection accepted from (127.0.0.1:53514)
[2m2024-06-06T13:56:50.297202Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"inbox"[1m}[0m[2m:[0m [2matn_atm_mediator::database::handlers[0m[2m:[0m DID_HASH: 47e1ddb470760b72d44090a50004d11d74e399ab07905b076d38ef0b51e77542
[2m2024-06-06T13:56:50.297873Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"inbox"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_list[0m[2m:[0m List contains (17) messages
[2m2024-06-06T13:56:50.298114Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/inbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m1 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:56:50.298176Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.298209Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.299495Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
[2m2024-06-06T13:56:50.299608Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:56:50.300010Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m S4cyS5gT: Protected connection accepted from (127.0.0.1:53514)
[2m2024-06-06T13:56:50.300273Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"outbox"[1m}[0m[2m:[0m [2matn_atm_mediator::database::handlers[0m[2m:[0m DID_HASH: 47e1ddb470760b72d44090a50004d11d74e399ab07905b076d38ef0b51e77542
[2m2024-06-06T13:56:50.300420Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_list_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz" [3mfolder[0m[2m=[0m"outbox"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_list[0m[2m:[0m List contains (0) messages
[2m2024-06-06T13:56:50.300480Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mGET [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/list/outbox [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m0 ms [3mstatus[0m[2m=[0m200
[2m2024-06-06T13:56:50.300533Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.300563Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(9), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.301693Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.301727Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.301820Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_request[0m[2m:[0m started processing request
[2m2024-06-06T13:56:50.302186Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::jwt_auth[0m[2m:[0m S4cyS5gT: Protected connection accepted from (127.0.0.1:53514)
[2m2024-06-06T13:56:50.302262Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_delete_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_delete[0m[2m:[0m Deleting (17) messages
[2m2024-06-06T13:56:50.302279Z[0m [34mDEBUG[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_delete_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"[1m}[0m[2m:[0m [2matn_atm_mediator::handlers::message_delete[0m[2m:[0m Deleting message: message_id(96ec8dd24185eb7f363b1ff8d3b3a7460a568e823c0a2851e1b3d2231ccf7e83)
[2m2024-06-06T13:56:50.302625Z[0m [31mERROR[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m[1mmessage_delete_handler[0m[1m{[0m[3msession[0m[2m=[0m"S4cyS5gT" [3mdid[0m[2m=[0m"did:peer:2.Vz6MkgWJfVmPELozq6aCycK3CpxHN8Upphn3WSuQkWY6iqsjF.EzQ3shfb7vwQaTJqFkt8nRfo7Nu98tmeYpdDfWgrqQitDaqXRz"[1m}[0m[2m:[0m[1mdelete_messages[0m[1m{[0m[3mmessage_hash[0m[2m=[0m"96ec8dd24185eb7f363b1ff8d3b3a7460a568e823c0a2851e1b3d2231ccf7e83"[1m}[0m[2m:[0m[1mget_message_metadata[0m[1m{[0m[3msession_id[0m[2m=[0m"S4cyS5gT" [3mmessage_hash[0m[2m=[0m"96ec8dd24185eb7f363b1ff8d3b3a7460a568e823c0a2851e1b3d2231ccf7e83"[1m}[0m[2m:[0m [2matn_atm_mediator::database::store[0m[2m:[0m Couldn't get message metadata from database: Response was of incompatible type - TypeError: "Response type not string compatible." (response was nil)
[2m2024-06-06T13:56:50.302679Z[0m [33m WARN[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2matn_atm_mediator::common::errors[0m[2m:[0m S4cyS5gT: httpcode(503) errorCode(10), errorCodeStr(DatabaseError) message(Couldn't get message metadata from database: Response was of incompatible type - TypeError: "Response type not string compatible." (response was nil))
[2m2024-06-06T13:56:50.302724Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_response[0m[2m:[0m finished processing request [3mlatency[0m[2m=[0m0 ms [3mstatus[0m[2m=[0m503
[2m2024-06-06T13:56:50.302741Z[0m [31mERROR[0m [1mrequest[0m[1m{[0m[3mmethod[0m[2m=[0mDELETE [3muri[0m[2m=[0mhttps://localhost:7037/atm/v1/delete [3mversion[0m[2m=[0mHTTP/2.0[1m}[0m[2m:[0m [2mtower_http::trace::on_failure[0m[2m:[0m response failed [3mclassification[0m[2m=[0mStatus code: 503 Service Unavailable [3mlatency[0m[2m=[0m0 ms
[2m2024-06-06T13:56:50.302794Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
[2m2024-06-06T13:56:50.302829Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
[2m2024-06-06T13:56:50.303210Z[0m [34mDEBUG[0m [1mConnection[0m[1m{[0m[3mpeer[0m[2m=[0mServer[1m}[0m[2m:[0m [2mh2::proto::connection[0m[2m:[0m Connection::poll; IO error [3merror[0m[2m=[0mUnexpectedEof
