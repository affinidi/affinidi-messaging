include:
  - project: affinidi/foundational/genesis/projen/genesis-pipeline
    ref: main
    file:
      - /stack/rust-lib.yml

# enable once the libs are published to crates
# as for now they are referenced via '../'
# which breaks the jobs.

clippy:processor:
  extends: .common
  before_script:
    - pwd
    - cd affinidi-messaging-processor/
  script:
    - cargo clippy --color always --no-deps
  allow_failure: true

clippy:mediator:
  extends: .common
  before_script:
    - pwd
    - cd affinidi-messaging-mediator/
  script:
    - cargo clippy --color always --no-deps
  allow_failure: true

clippy:didcomm:
  extends: .common
  before_script:
    - pwd
    - cd affinidi-messaging-didcomm/
  script:
    - cargo clippy --color always --no-deps
  allow_failure: true

build:
  rules:
    - when: never

clippy:
  rules:
    - when: never

fmt:
  rules:
    - when: never

license:
  rules:
    - when: never
